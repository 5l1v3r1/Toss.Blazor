@page "/ads"
@inject IHttpApiClientRequestBuilderFactory ClientFactory;
<h1>Ads</h1>
<input type="file" onchange="@UploadFile" id="fileUpload" ref="fileInput" />
@functions{
    ElementRef fileInput;
    async Task UploadFile()
    {
        await JsInterop.ConsoleLog("onchange");
        var data = await JsInterop.GetFileData("fileUpload");
        await JsInterop.ConsoleLog(data.Length.ToString());
        await ClientFactory.Create("/api/upload")
            .OnOK<FileUploadResult>(async s =>
            {
                await JsInterop.ConsoleLog("C# received " + s.TempFileName + " from server");
            })
            .Post(Convert.FromBase64String(data));
    }
}
